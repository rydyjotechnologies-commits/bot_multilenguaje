<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Bot Multilenguaje</title>
</head>
<body>

<h2>ðŸ¤– Bot Multilenguaje con Voz</h2>

<input type="text" id="mensaje" placeholder="Escribe aquÃ­..." style="width:300px;">
<button onclick="enviar()">Enviar</button>
<button onclick="activarAudio()">ðŸ”Š Activar voz</button>

<p><strong>Respuesta:</strong></p>
<div id="respuesta"></div>

<script>
let audioPermitido = false;

function activarAudio() {
    audioPermitido = true;
    alert("ðŸ”Š Voz activada");
}

async function enviar() {
    const mensaje = document.getElementById("mensaje").value;

    const res = await fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ mensaje })
    });

    const data = await res.json();
    document.getElementById("respuesta").innerText = data.respuesta;

    if (audioPermitido) {
        const voz = new SpeechSynthesisUtterance(data.respuesta);
        voz.lang = "es-ES";
        speechSynthesis.speak(voz);
    }
}
</script>

</body>
</html>
